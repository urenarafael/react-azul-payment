(this["webpackJsonpazul-payment"]=this["webpackJsonpazul-payment"]||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n.n(s),a=n(23),o=n.n(a),r=(n(37),n(20)),i=n(12),d=(n(38),n(31)),l=n(24),u=n.n(l),j="&0ic2GtJ0v%h#9MuWLdYjstN1LWewHO9KHpRe2GVfcaNoO1w$t1JHgnMbvgqFX4K&H6hN0cD0pc3UQYyKCDjCZWyx6kO&V3PwsUUxZeiEO06WxvHmagJZaDaEKD9W0Vy",p={MerchantId:"39912110001",MerchantName:"Nateevos",MerchantType:"Travel",CurrencyCode:"$",OrderNumber:"111111",Amount:"1000",ITBIS:"000",ApprovedUrl:"",CancelUrl:"",DeclinedUrl:"",UseCustomField1:"0",CustomField1Label:"",CustomField1Value:"",UseCustomField2:"0",CustomField2Label:"",CustomField2Value:""},m=function(e){return u()(e)},h=n(70),b=n(1),O=function(){return Object(b.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:1e4,backgroundColor:"#FFF",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",marginTop:"auto",marginBottom:"auto"},children:Object(b.jsx)(h.a,{size:"6rem",style:{color:"#e8eaef",margin:0,padding:0}})})},x=function(){return Object(b.jsx)("div",{style:{backgroundColor:"black",height:"100vh",width:"100%"},children:Object(b.jsxs)("figure",{children:[Object(b.jsx)("div",{class:"sad-mac"}),Object(b.jsxs)("figcaption",{children:[Object(b.jsx)("span",{class:"sr-text",children:"Error 404: Not Found"}),Object(b.jsx)("span",{class:"e"}),Object(b.jsx)("span",{class:"r"}),Object(b.jsx)("span",{class:"r"}),Object(b.jsx)("span",{class:"o"}),Object(b.jsx)("span",{class:"r"}),Object(b.jsx)("span",{class:"_4"}),Object(b.jsx)("span",{class:"_0"}),Object(b.jsx)("span",{class:"_4"}),Object(b.jsx)("span",{class:"n"}),Object(b.jsx)("span",{class:"o"}),Object(b.jsx)("span",{class:"t"}),Object(b.jsx)("span",{class:"f"}),Object(b.jsx)("span",{class:"o"}),Object(b.jsx)("span",{class:"u"}),Object(b.jsx)("span",{class:"n"}),Object(b.jsx)("span",{class:"d"})]})]})})},g=function(){return Object(b.jsx)("div",{style:{backgroundColor:"black",height:"100vh",width:"100%"},children:Object(b.jsxs)("figure",{children:[Object(b.jsx)("div",{class:"sad-mac"}),Object(b.jsx)("figcaption",{children:Object(b.jsx)("span",{class:"sr-text",children:"Invalid Payment"})})]})})},v=n(3),f=n(30),y=n(29),C=n.n(y),U="https://api.nateevos.com/",I="https://api.nateevos.com/commons/storage",S="https://payments.nateevos.com/",F=function(){var e=Object(v.f)().storageId,t="".concat(I,"/").concat(e),n=Object(s.useState)(p),a=Object(i.a)(n,2),o=a[0],l=a[1],u=Object(s.useState)(""),h=Object(i.a)(u,2),x=h[0],f=h[1],y=Object(s.useState)(!1),C=Object(i.a)(y,2),U=C[0],F=C[1],A=Object(s.useState)(!1),T=Object(i.a)(A,2),N=T[0],M=T[1];Object(s.useEffect)((function(){f(function(e){var t=String(e.MerchantId)+String(e.MerchantName)+String(e.MerchantType)+String(e.CurrencyCode)+String(e.OrderNumber)+String(e.Amount)+String(e.ITBIS)+String(e.ApprovedUrl)+String(e.DeclinedUrl)+String(e.CancelUrl)+String(e.UseCustomField1)+String(e.CustomField1Label)+String(e.CustomField1Value)+String(e.UseCustomField2)+String(e.CustomField2Label)+String(e.CustomField2Value)+String(j),n=new d.a("SHA-512","TEXT",{hmacKey:{value:j,format:"TEXT"}});return n.update(t),n.getHash("HEX")}(o))}),[o]);var D=c.a.useCallback((function(){fetch("".concat(t),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){var t,n,s;e.hasError?(F(!0),M(!0)):(F(!0),(null===(t=e.message.value)||void 0===t?void 0:t.amount)?(n=e.message.id,s=e.message.value.amount,l(Object(r.a)(Object(r.a)({},p),{},{OrderNumber:n,ApprovedUrl:"".concat(S,"successtmp?ApprovedTemp"),CancelUrl:"".concat(S).concat(n,"?Cancelled"),DeclinedUrl:"".concat(S).concat(n,"?Declined"),Amount:m(s)})),setTimeout((function(){document.getElementById("submit").click()}),1e3)):M(!0))}),(function(e){F(!0)}))}),[t]);return Object(s.useEffect)((function(){D(),!N&&U&&setTimeout((function(){document.getElementById("submit").click()}),1e3)}),[D]),Object(b.jsxs)(b.Fragment,{children:[!U&&Object(b.jsx)(O,{}),N&&Object(b.jsx)(g,{}),U&&!N&&Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)("header",{className:"App-header",children:[Object(b.jsx)("img",{src:"https://payments.nateevos.com/administrator/nateevos.png",className:"App-logo",alt:"logo"}),Object(b.jsx)("p",{}),Object(b.jsxs)("form",{action:"https://pagos.azul.com.do/PaymentPage/Default.aspx",method:"post",children:[Object(b.jsx)("input",{type:"hidden",id:"MerchantId",name:"MerchantId",value:o.MerchantId}),Object(b.jsx)("input",{type:"hidden",id:"TrxType",name:"TrxType",value:"HOLD"}),Object(b.jsx)("input",{type:"hidden",id:"MerchantName",name:"MerchantName",value:o.MerchantName}),Object(b.jsx)("input",{type:"hidden",id:"MerchantType",name:"MerchantType",value:o.MerchantType}),Object(b.jsx)("input",{type:"hidden",id:"CurrencyCode",name:"CurrencyCode",value:o.CurrencyCode}),Object(b.jsx)("input",{type:"hidden",id:"OrderNumber",name:"OrderNumber",value:o.OrderNumber}),Object(b.jsx)("input",{type:"hidden",id:"Amount",name:"Amount",value:o.Amount}),Object(b.jsx)("input",{type:"hidden",id:"ApprovedUrl",name:"ApprovedUrl",value:o.ApprovedUrl}),Object(b.jsx)("input",{type:"hidden",id:"DesignV2",name:"DesignV2",value:1}),Object(b.jsx)("input",{type:"hidden",id:"LogoImageUrl",name:"LogoImageUrl",value:"https://payments.nateevos.com/administrator/nateevos.png"}),Object(b.jsx)("input",{type:"hidden",id:"ProductImageUrl",name:"ProductImageUrl",value:"https://payments.nateevos.com/administrator/nateevos.png"}),Object(b.jsx)("input",{type:"hidden",id:"DeclinedUrl",name:"DeclinedUrl",value:o.DeclinedUrl}),Object(b.jsx)("input",{type:"hidden",id:"CancelUrl",name:"CancelUrl",value:o.CancelUrl}),Object(b.jsx)("input",{type:"hidden",id:"UseCustomField1",name:"UseCustomField1",value:o.UseCustomField1}),Object(b.jsx)("input",{type:"hidden",id:"UseCustomField2",name:"UseCustomField2",value:o.UseCustomField2}),Object(b.jsx)("input",{type:"hidden",id:"AuthHash",name:"AuthHash",value:x}),Object(b.jsx)("input",{type:"submit",id:"submit",value:"Enviar",style:{visibility:"hidden"}})]})]})})]})},A=function(){return Object(b.jsx)("div",{children:Object(b.jsx)(x,{})})},T=function(){var e=C.a.parse(window.location.search);return c.a.useEffect((function(){if(console.log("response azul is",e),"DECLINADA"==e.ResponseMessage&&(console.log("response message when declined",e),window.location.href="https://nateevos.com/azul-pay?response=Declined"),"APROBADA"==e.ResponseMessage){console.log("do req");var t="".concat(I,"/").concat(e.OrderNumber);fetch("".concat(t),{mode:"cors"}).then((function(e){return e.json()})).then((function(t){console.log("r");var n=t.message.value,s={vendorId:n.data.vendorId,userId:n.data.userId,paymentMethod:"azul",typeOfReservation:n.type,amount:n.amount,reservationId:n.data.id,storageId:e.OrderNumber,paymentMethodResponse:e};console.log("dd",s),function(e){var t=new Headers;t.append("Content-Type","application/json");var n={method:"POST",headers:t,body:JSON.stringify(e),redirect:"follow"};fetch("".concat(U,"payments"),n).then((function(e){return e.text()})).then((function(e){console.log(e),window.location.href="".concat(S,"successcompleted")})).catch((function(e){return console.log("error",e)}))}(s)}),(function(e){}))}}),[e]),Object(b.jsx)("div",{children:Object(b.jsx)(O,{})})},N=function(){return Object(b.jsx)("div",{children:"Success"})};var M=function(){return Object(b.jsx)(f.a,{children:Object(b.jsxs)(v.c,{children:[Object(b.jsx)(v.a,{exact:!0,path:"/successtmp",component:T}),Object(b.jsx)(v.a,{exact:!0,path:"/successcompleted",component:N}),Object(b.jsx)(v.a,{exact:!0,path:"/:storageId",component:F}),Object(b.jsx)(v.a,{exact:!0,path:"*",component:A})]})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),s(e),c(e),a(e),o(e)}))};o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(M,{})}),document.getElementById("root")),D()}},[[58,1,2]]]);
//# sourceMappingURL=main.4297cb77.chunk.js.map