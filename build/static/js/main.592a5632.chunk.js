(this["webpackJsonpazul-payment"]=this["webpackJsonpazul-payment"]||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(23),i=n.n(a),r=(n(37),n(20)),o=n(12),d=(n(38),n(31)),l=n(24),u=n.n(l),j="&0ic2GtJ0v%h#9MuWLdYjstN1LWewHO9KHpRe2GVfcaNoO1w$t1JHgnMbvgqFX4K&H6hN0cD0pc3UQYyKCDjCZWyx6kO&V3PwsUUxZeiEO06WxvHmagJZaDaEKD9W0Vy",p={MerchantId:"39912110001",MerchantName:"Nateevos",MerchantType:"Travel",CurrencyCode:"$",OrderNumber:"111111",Amount:"1000",ITBIS:"000",ApprovedUrl:"",CancelUrl:"",DeclinedUrl:"",UseCustomField1:"0",CustomField1Label:"",CustomField1Value:"",UseCustomField2:"0",CustomField2Label:"",CustomField2Value:""},m=function(e){return u()(e)},b=n(70),h=n(1),O=function(){return Object(h.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:1e4,backgroundColor:"#FFF",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",marginTop:"auto",marginBottom:"auto"},children:Object(h.jsx)(b.a,{size:"6rem",style:{color:"#e8eaef",margin:0,padding:0}})})},x=function(){return Object(h.jsx)("div",{style:{backgroundColor:"black",height:"100vh",width:"100%"},children:Object(h.jsxs)("figure",{children:[Object(h.jsx)("div",{class:"sad-mac"}),Object(h.jsxs)("figcaption",{children:[Object(h.jsx)("span",{class:"sr-text",children:"Error 404: Not Found"}),Object(h.jsx)("span",{class:"e"}),Object(h.jsx)("span",{class:"r"}),Object(h.jsx)("span",{class:"r"}),Object(h.jsx)("span",{class:"o"}),Object(h.jsx)("span",{class:"r"}),Object(h.jsx)("span",{class:"_4"}),Object(h.jsx)("span",{class:"_0"}),Object(h.jsx)("span",{class:"_4"}),Object(h.jsx)("span",{class:"n"}),Object(h.jsx)("span",{class:"o"}),Object(h.jsx)("span",{class:"t"}),Object(h.jsx)("span",{class:"f"}),Object(h.jsx)("span",{class:"o"}),Object(h.jsx)("span",{class:"u"}),Object(h.jsx)("span",{class:"n"}),Object(h.jsx)("span",{class:"d"})]})]})})},g=function(){return Object(h.jsx)("div",{style:{backgroundColor:"black",height:"100vh",width:"100%"},children:Object(h.jsxs)("figure",{children:[Object(h.jsx)("div",{class:"sad-mac"}),Object(h.jsx)("figcaption",{children:Object(h.jsx)("span",{class:"sr-text",children:"Invalid Payment"})})]})})},v=n(3),f=n(30),y=n(29),C=n.n(y),U="https://api.nateevos.com/",S="https://api.nateevos.com/commons/storage",F="https://payments.nateevos.com/",I=function(){var e=Object(v.f)().storageId,t="".concat(S,"/").concat(e),n=Object(c.useState)(p),a=Object(o.a)(n,2),i=a[0],l=a[1],u=Object(c.useState)(""),b=Object(o.a)(u,2),x=b[0],f=b[1],y=Object(c.useState)(!1),C=Object(o.a)(y,2),U=C[0],I=C[1],T=Object(c.useState)(!1),A=Object(o.a)(T,2),N=A[0],D=A[1];Object(c.useEffect)((function(){f(function(e){var t=String(e.MerchantId)+String(e.MerchantName)+String(e.MerchantType)+String(e.CurrencyCode)+String(e.OrderNumber)+String(e.Amount)+String(e.ITBIS)+String(e.ApprovedUrl)+String(e.DeclinedUrl)+String(e.CancelUrl)+String(e.UseCustomField1)+String(e.CustomField1Label)+String(e.CustomField1Value)+String(e.UseCustomField2)+String(e.CustomField2Label)+String(e.CustomField2Value)+String(j),n=new d.a("SHA-512","TEXT",{hmacKey:{value:j,format:"TEXT"}});return n.update(t),n.getHash("HEX")}(i))}),[i]);var M=s.a.useCallback((function(){fetch("".concat(t),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){var t,n,c;e.hasError?(I(!0),D(!0)):(I(!0),(null===(t=e.message.value)||void 0===t?void 0:t.amount)?(n=e.message.id,c=e.message.value.amount,l(Object(r.a)(Object(r.a)({},p),{},{OrderNumber:n,ApprovedUrl:"".concat(F,"successtmp?ApprovedTemp"),CancelUrl:"".concat(F).concat(n,"?Cancelled"),DeclinedUrl:"".concat(F).concat(n,"?Declined"),Amount:m(c)})),setTimeout((function(){document.getElementById("submit").click()}),1e3)):D(!0))}),(function(e){I(!0)}))}),[t]);return Object(c.useEffect)((function(){M(),!N&&U&&setTimeout((function(){document.getElementById("submit").click()}),1e3)}),[M]),Object(h.jsxs)(h.Fragment,{children:[!U&&Object(h.jsx)(O,{}),N&&Object(h.jsx)(g,{}),U&&!N&&Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)("header",{className:"App-header",children:[Object(h.jsx)("img",{src:"https://i.imgur.com/oJcfEcD.png",className:"App-logo",alt:"logo"}),Object(h.jsx)("p",{}),Object(h.jsxs)("form",{action:"https://pagos.azul.com.do/PaymentPage/Default.aspx",method:"post",children:[Object(h.jsx)("input",{type:"hidden",id:"MerchantId",name:"MerchantId",value:i.MerchantId}),Object(h.jsx)("input",{type:"hidden",id:"TrxType",name:"TrxType",value:"HOLD"}),Object(h.jsx)("input",{type:"hidden",id:"MerchantName",name:"MerchantName",value:i.MerchantName}),Object(h.jsx)("input",{type:"hidden",id:"MerchantType",name:"MerchantType",value:i.MerchantType}),Object(h.jsx)("input",{type:"hidden",id:"CurrencyCode",name:"CurrencyCode",value:i.CurrencyCode}),Object(h.jsx)("input",{type:"hidden",id:"OrderNumber",name:"OrderNumber",value:i.OrderNumber}),Object(h.jsx)("input",{type:"hidden",id:"Amount",name:"Amount",value:i.Amount}),Object(h.jsx)("input",{type:"hidden",id:"ApprovedUrl",name:"ApprovedUrl",value:i.ApprovedUrl}),Object(h.jsx)("input",{type:"hidden",id:"DesignV2",name:"DesignV2",value:1}),Object(h.jsx)("input",{type:"hidden",id:"LogoImageUrl",name:"LogoImageUrl",value:"https://i.imgur.com/oJcfEcD.png"}),Object(h.jsx)("input",{type:"hidden",id:"ProductImageUrl",name:"ProductImageUrl",value:"https://i.imgur.com/oJcfEcD.png"}),Object(h.jsx)("input",{type:"hidden",id:"DeclinedUrl",name:"DeclinedUrl",value:i.DeclinedUrl}),Object(h.jsx)("input",{type:"hidden",id:"CancelUrl",name:"CancelUrl",value:i.CancelUrl}),Object(h.jsx)("input",{type:"hidden",id:"UseCustomField1",name:"UseCustomField1",value:i.UseCustomField1}),Object(h.jsx)("input",{type:"hidden",id:"UseCustomField2",name:"UseCustomField2",value:i.UseCustomField2}),Object(h.jsx)("input",{type:"hidden",id:"AuthHash",name:"AuthHash",value:x}),Object(h.jsx)("input",{type:"submit",id:"submit",value:"Enviar",style:{visibility:"hidden"}})]})]})})]})},T=function(){return Object(h.jsx)("div",{children:Object(h.jsx)(x,{})})},A=function(){var e=C.a.parse(window.location.search);return s.a.useEffect((function(){if(console.log(e),"APROBADA"==e.ResponseMessage){console.log("do req");var t="".concat(S,"/").concat(e.OrderNumber);fetch("".concat(t),{mode:"cors"}).then((function(e){return e.json()})).then((function(t){console.log("r");var n=t.message.value,c={vendorId:n.data.vendorId,userId:n.data.userId,paymentMethod:"azul",typeOfReservation:n.type,amount:n.amount,reservationId:n.data.id,storageId:e.OrderNumber,paymentMethodResponse:e};console.log("dd",c),function(e){var t=new Headers;t.append("Content-Type","application/json");var n={method:"POST",headers:t,body:JSON.stringify(e),redirect:"follow"};fetch("".concat(U,"payments"),n).then((function(e){return e.text()})).then((function(e){console.log(e),window.location.href="".concat(F,"successcompleted")})).catch((function(e){return console.log("error",e)}))}(c)}),(function(e){}))}}),[e]),Object(h.jsx)("div",{children:Object(h.jsx)(O,{})})},N=function(){return Object(h.jsx)("div",{children:"Success"})};var D=function(){return Object(h.jsx)(f.a,{children:Object(h.jsxs)(v.c,{children:[Object(h.jsx)(v.a,{exact:!0,path:"/successtmp",component:A}),Object(h.jsx)(v.a,{exact:!0,path:"/successcompleted",component:N}),Object(h.jsx)(v.a,{exact:!0,path:"/:storageId",component:I}),Object(h.jsx)(v.a,{exact:!0,path:"*",component:T})]})})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),a(e),i(e)}))};i.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(D,{})}),document.getElementById("root")),M()}},[[58,1,2]]]);
//# sourceMappingURL=main.592a5632.chunk.js.map